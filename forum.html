<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Kayƒ±t Formu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* Global Ayarlar */
    * { box-sizing: border-box; }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 15px;
      background: #f5f7fa;
      color: #333;
    }

    input, textarea, table td { text-transform: uppercase; }

    /* --- √úst Men√º --- */
    .menu {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      background: #007acc;
      padding: 12px;
      border-radius: 12px;
    }

    .menu a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      font-size: 16px;
      padding: 5px 10px;
    }

    /* --- Form Tasarƒ±mƒ± --- */
    form {
      max-width: 500px;
      margin: 0 auto;
      background: #fff;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.05);
    }

    label {
      font-weight: 600;
      margin-top: 15px;
      display: block;
      font-size: 14px;
    }

    input, select, textarea, button {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 1.5px solid #e1e5eb;
      border-radius: 8px;
      font-size: 16px;
      background-color: #f9fbff;
    }

    input:focus, select:focus, textarea:focus {
      border-color: #007acc;
      outline: none;
      background-color: #fff;
      box-shadow: 0 0 0 3px rgba(0,122,204,0.1);
    }

    .row { display: flex; gap: 15px; }
    .col { flex: 1; }

    .input-group { position: relative; }
    .input-group .suffix {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-weight: bold;
      color: #888;
      pointer-events: none;
    }

    button {
      margin-top: 20px;
      background: #007acc;
      color: white;
      border: none;
      font-size: 18px;
      cursor: pointer;
      padding: 15px;
    }

    button:hover { background: #005f9e; }

    #message {
      margin-top: 15px;
      font-weight: bold;
      text-align: center;
    }

    @media (max-width: 480px) {
      .row { flex-direction: column; gap: 0; }
    }
  </style>
</head>
<body>

  <nav class="menu">
    <a href="forum.html">üìù Kayƒ±t Giri≈ü</a>
    <a href="rapor.html">üìä Rapor</a>
  </nav>

  <form id="myForm">
    <label>Ad Soyad:</label>
    <input type="text" name="name" class="focusable" placeholder="AD SOYAD Gƒ∞Rƒ∞Nƒ∞Z" required>

    <div class="row">
      <div class="col">
        <label>Marka:</label>
        <select name="marka" class="focusable" required>
          <option value="">Se√ßiniz</option>
          <option value="Apple">Apple</option>
          <option value="Samsung">Samsung</option>
          <option value="Xiaomi">Xiaomi</option>
          <option value="Huawei">Huawei</option>
          <option value="Oppo">Oppo</option>
          <option value="Realme">Realme</option>
          <option value="√énfinix">ƒ∞nfinix</option>
          <option value="Tecno">Tecno</option>
        </select>
      </div>
      <div class="col">
        <label>Model:</label>
        <input type="text" name="model" class="focusable" placeholder="MODEL" required>
      </div>
    </div>

    <label>IMEI:</label>
    <input type="text" name="imei" class="focusable" required maxlength="15"
           pattern="\d{15}" title="IMEI 15 haneli rakam olmalƒ±"
           inputmode="numeric"
           oninput="this.value=this.value.replace(/\D/g,'').slice(0,15)">

    <div class="row">
      <div class="col">
        <label>ƒ∞≈ülem:</label>
        <select name="islem" class="focusable" required>
          <option value="">Se√ßiniz</option>
          <option value="Alƒ±ndƒ±">Alƒ±ndƒ±</option>
          <option value="Satƒ±ldƒ±">Satƒ±ldƒ±</option>
        </select>
      </div>
      <div class="col">
        <label>Fiyat:</label>
        <div class="input-group">
          <input type="tel" id="fiyat" name="fiyat" class="focusable" inputmode="numeric" placeholder="√ñrn: 5.000" required>
          <span class="suffix">TL</span>
        </div>
      </div>
    </div>

    <label>Tarih:</label>
    <input type="date" name="tarih" id="tarih" class="focusable" required>

    <label>Not:</label>
    <textarea name="not" rows="3" class="focusable" placeholder="Eklemek istediƒüiniz notlar..."></textarea>

    <button type="submit" id="submitBtn">KAYDI G√ñNDER</button>
    <div id="message"></div>
  </form>

  <script>
    const form = document.getElementById("myForm");
    const focusableInputs = Array.from(document.querySelectorAll(".focusable"));

    // --- Enter Tu≈üu Kontrol√º ---
    form.addEventListener("keydown", function(e) {
      if (e.key === "Enter") {
        // Eƒüer focus textarea √ºzerinde deƒüilse Enter'ƒ±n normal i≈ülevini durdur
        if (e.target.tagName !== "TEXTAREA") {
          e.preventDefault();
          
          const index = focusableInputs.indexOf(e.target);
          if (index > -1 && index < focusableInputs.length - 1) {
            // Bir sonraki bo≈ü kutucuƒüa ge√ß
            focusableInputs[index + 1].focus();
          } else if (index === focusableInputs.length - 1) {
            // Eƒüer son kutucuktaysak formu g√∂nder
            form.requestSubmit();
          }
        }
      }
    });

    // B√ºy√ºk harf ve diƒüer i≈ülemler
    form.addEventListener("submit", function(e) {
      const inputs = this.querySelectorAll("input, textarea");
      inputs.forEach(inp => {
        if(inp.type !== 'date') {
          inp.value = inp.value.toUpperCase();
        }
      });
    });

    const scriptURL = "https://script.google.com/macros/s/AKfycbzb4SWk4Ihk8rMLIyNn6KhyNZU1bf0RCQJc84ML6FVqm3lA9XQgFp0Yg9R0Zgs6kzfLnQ/exec";
    const message = document.getElementById("message");
    const tarihInput = document.getElementById("tarih");
    const fiyatInput = document.getElementById("fiyat");

    document.addEventListener("DOMContentLoaded", () => {
      tarihInput.value = new Date().toISOString().split("T")[0];
    });

    fiyatInput.addEventListener("input", () => {
      const digits = fiyatInput.value.replace(/\D/g, "");
      if (!digits) { fiyatInput.value = ""; return; }
      const n = Number(digits);
      fiyatInput.value = new Intl.NumberFormat("tr-TR", { maximumFractionDigits: 0 }).format(n);
    });

    form.addEventListener("submit", e => {
      e.preventDefault();
      message.textContent = "‚è≥ G√∂nderiliyor...";
      message.style.color = "orange";

      const formData = new FormData(form);
      const raw = formData.get("fiyat") || "";
      const digits = raw.replace(/\D/g, "");
      const n = digits ? Number(digits) : 0;
      const formatted = new Intl.NumberFormat("tr-TR", { maximumFractionDigits: 0 }).format(n) + " TL";
      formData.set("fiyat", formatted);

      fetch(scriptURL, { method: "POST", body: formData })
        .then(response => {
          message.textContent = "‚úÖ Kayƒ±t ba≈üarƒ±lƒ±!";
          message.style.color = "green";
          form.reset();
          tarihInput.value = new Date().toISOString().split("T")[0];
        })
        .catch(error => {
          message.textContent = "‚ùå Hata olu≈ütu!";
          message.style.color = "red";
        });
    });

    tarihInput.addEventListener("blur", () => {
      if (!tarihInput.value) {
        tarihInput.value = new Date().toISOString().split("T")[0];
      }
    });
  </script>
</body>
</html>
